#!/bin/bash
#
# Copyright (c) 2014 Samsung Electronics. All Rights Reserved
#
# PROPRIETARY/CONFIDENTIAL
#
# This software is the confidential and proprietary information of
# SAMSUNG ELECTRONICS ("Confidential Information").
# You shall not disclose such Confidential Information and shall
# use it only in accordance with the terms of the license agreement
# you entered into with SAMSUNG ELECTRONICS. SAMSUNG make no
# representations or warranties about the suitability
# of the software, either express or implied, including but not
# limited to the implied warranties of merchantability, fitness for a
# particular purpose, or non-infringement. SAMSUNG shall not be liable
# for any damages suffered by licensee as a result of using, modifying
# or distributing this software or its derivatives.
#
# Attach to or start a SBrowser process and debug it.
# See --help for details.
#

PROGDIR=$(dirname "$0")


TARGET="stable"
ADB_GDB_PACKAGE_NAME=com.sec.android.app.sbrowser

export ADB_GDB_PROGNAME=$(basename "$0")
export ADB_GDB_ACTIVITY=$ADB_GDB_PACKAGE_NAME.SBrowserMainActivity

if [[ $1 == "--target="* ]]; then
    TARGET=$(expr "x$1" : 'x[^=]*=\(.*\)')
    if [[ $TARGET != "edge" ]] \
        && [[ $TARGET != "beta" ]] \
        && [[ $TARGET != "stable" ]]; then
        echo "Usage: adb_gdb_sbrowser [--target=(edge|beta|stable)]"
        exit
    fi
    shift
fi

if [[ $TARGET != "stable" ]]; then
    ADB_GDB_PACKAGE_NAME=$ADB_GDB_PACKAGE_NAME.$TARGET
fi

"$PROGDIR"/adb_gdb \
    --program-name=SBrowser \
    --package-name=$ADB_GDB_PACKAGE_NAME \
    "$@"
